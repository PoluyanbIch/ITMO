<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/f/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <h:outputStylesheet name="form.css" library="style"/>
    
    <h:panelGroup styleClass="hit-form-wrapper" layout="block">
        <h:form id="hit-form">
            <p:remoteCommand 
                name="canvasHandler" 
                process="@this" 
                update="hits-table"
                action="#{hitFormBean.submitPoint}">
                <f:setPropertyActionListener target="#{hitFormBean.selectedX}" value="#{param.x}" />
                <f:setPropertyActionListener target="#{hitFormBean.yCoordinate}" value="#{param.y}" />
                <f:setPropertyActionListener target="#{hitFormBean.selectedR}" value="#{param.r}" />
            </p:remoteCommand>
            <h2>HIT</h2>
            

            <!-- X координата -->
            <h:panelGroup styleClass="input-wrapper" layout="block">
                <label for="x-radio">X:</label>
                <div style="display: inline-block;">
                    <p:selectOneRadio id="x-radio"
                                value="#{hitFormBean.selectedX}"
                                layout="lineDirection"
                                onchange="updateGlobalValues(this.value, globalY, globalR)">
                    <f:selectItem itemLabel="-2" itemValue="-2"/>
                    <f:selectItem itemLabel="-1.5" itemValue="-1.5"/>
                    <f:selectItem itemLabel="-1" itemValue="-1"/>
                    <f:selectItem itemLabel="-0.5" itemValue="-0.5"/>
                    <f:selectItem itemLabel="0" itemValue="0"/>
                    <f:selectItem itemLabel="0.5" itemValue="0.5"/>
                    <f:selectItem itemLabel="1" itemValue="1"/>
                    <f:selectItem itemLabel="1.5" itemValue="1.5"/>
                </p:selectOneRadio>
                </div>
                
                <h:message for="x-radio" style="color:red; display:block; min-height:1.2em;" />
            </h:panelGroup>

            <!-- Y координата -->
            <h:panelGroup styleClass="input-wrapper" layout="block">
                <label for="y-input">Y:</label>
                <p:inputText id="y-input"
                             value="#{hitFormBean.yCoordinate}">
                    <f:validator validatorId="yCoordinateValidator"/>
                    <p:ajax event="blur"
                            listener="#{hitFormBean.onValueChange}"
                            oncomplete="handleUpdateFromServer(xhr, status, args)"
                            process="@this"
                            update="y-message"/>
                </p:inputText>
                <h:message for="y-input" id="y-message"
                           style="color:red; display:block; min-height:1.2em;"/>
            </h:panelGroup>

            <!-- Радиус R -->
            <h:panelGroup styleClass="input-wrapper radius">
                <label for="r-radio">R:</label>
                <p:selectOneRadio id="r-radio"
                                value="#{hitFormBean.selectedR}"
                                layout="lineDirection"
                                onchange="updateGlobalValues(globalX, globalY, this.value)">
                    <f:selectItem itemLabel="1" itemValue="1"/>
                    <f:selectItem itemLabel="1.5" itemValue="1.5"/>
                    <f:selectItem itemLabel="2" itemValue="2"/>
                    <f:selectItem itemLabel="2.5" itemValue="2.5"/>
                    <f:selectItem itemLabel="3" itemValue="3"/>
                </p:selectOneRadio>
                <h:message for="r-radio" style="color:red; display:block; min-height:1.2em;" />
            </h:panelGroup>

            <!-- Кнопка HIT -->
            <h:panelGroup styleClass="input-wrapper" layout="block">
                <p:commandButton value="HIT"
                                 action="#{hitFormBean.submit}"
                                 process="@form"
                                 update=":hits-table @form"
                                 oncomplete="fillCanvas()"/>
            </h:panelGroup>

        </h:form>
    </h:panelGroup>
</ui:composition>
